{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs","../src/js/markupGallery.js","../src/services/api.js","../src/services/buttonLoadMore.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.form'),\n  ulContainer: document.querySelector('.list_gallery'),\n  loader: document.querySelector('.loader'),\n  buttonSearch: document.querySelector('.button'),\n  buttonLoadMore: document.querySelector('.button-more'),\n};\n","const markupGallery = arr => {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n          <a\n            class=\"gallery-link\"\n            href=\"${largeImageURL}\"\n          >\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <div class=\"coments\">\n            <p class=\"comments-title\">\n              Likes<span class=\"comments-text\">${likes}</span>\n            </p>\n            <p class=\"comments-title\">\n              Views<span class=\"comments-text\">${views}</span>\n            </p>\n            <p class=\"comments-title\">\n              Comments<span class=\"comments-text\">${comments}</span>\n            </p>\n            <p class=\"comments-title\">\n              Downloads<span class=\"comments-text\">${downloads}</span>\n            </p>\n          </div>\n        </li>`\n    )\n    .join('');\n};\n\nexport { markupGallery };\n","import apiInstance from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41980985-8125375fe1d9f9e65ca18808e';\n\nfunction serchPictureGallery({ query, page = 1, per_page }) {\n  return apiInstance\n    .get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        image_type: 'horizontal',\n        safesearch: true,\n        per_page,\n        page,\n      },\n    })\n    .then(({ data }) => data);\n}\n\nexport { serchPictureGallery };\n","const hiddenClass = 'is-hidden';\n\nfunction hide(button) {\n  button.classList.add(hiddenClass);\n}\n\nfunction show(button) {\n  button.classList.remove(hiddenClass);\n}\n\nfunction enable(button) {\n  button.disabled = false;\n}\n\nfunction disable(button) {\n  button.disabled = true;\n}\n\nexport const buttonLoadMore = { hide, show, enable, disable };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from './js/refs';\nimport { markupGallery } from './js/markupGallery';\nimport { serchPictureGallery } from './services/api';\nimport { buttonLoadMore } from './services/buttonLoadMore';\n\nconst pageSizeParams = {\n  query: '',\n  page: 1,\n  maxPage: 0,\n  per_page: 40,\n};\n\nrefs.loader.style.display = 'none';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  refs.ulContainer.innerHTML = '';\n  pageSizeParams.page = 1;\n  refs.loader.style.display = 'block';\n  const form = event.currentTarget;\n  pageSizeParams.query = form.elements.text.value.trim();\n\n  if (!pageSizeParams.query) {\n    refs.loader.style.display = 'none';\n    refs.buttonLoadMore.removeEventListener('click', onButtonLoadMoreClick);\n    buttonLoadMore.hide(refs.buttonLoadMore);\n    iziToast.error({\n      message: 'Sorry, you have not entered anything!',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      color: '#FAFAFB',\n    });\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await serchPictureGallery(pageSizeParams);\n    pageSizeParams.maxPage = Math.ceil(totalHits / pageSizeParams.per_page);\n    refs.loader.style.display = 'none';\n\n    if (hits.length === 0) {\n      buttonLoadMore.hide(refs.buttonLoadMore);\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        color: '#FAFAFB',\n      });\n    }\n\n    refs.ulContainer.innerHTML = markupGallery(hits); // розмітка\n\n    const lightbox = new SimpleLightbox('.list_gallery a', {\n      caption: true,\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      buttonLoadMore.show(refs.buttonLoadMore);\n      refs.buttonLoadMore.addEventListener('click', onButtonLoadMoreClick);\n    } else {\n      buttonLoadMore.hide(refs.buttonLoadMore);\n    }\n  } catch (error) {\n    console.log(error);\n    refs.loader.style.display = 'none';\n  }\n}\n\nasync function onButtonLoadMoreClick() {\n  pageSizeParams.page += 1;\n  buttonLoadMore.disable(buttonLoadMore);\n\n  try {\n    const { hits } = await serchPictureGallery(pageSizeParams);\n\n    const markup = markupGallery(hits);\n    refs.ulContainer.insertAdjacentHTML('beforeend', markup); // розмітка\n\n    const rect = refs.ulContainer.getBoundingClientRect();\n    console.log(rect);\n    window.scrollBy({\n      top: 800,\n      left: 50,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    buttonLoadMore.enable(buttonLoadMore);\n\n    if (pageSizeParams.page === pageSizeParams.maxPage) {\n      buttonLoadMore.hide(buttonLoadMore);\n      iziToast.error({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        color: '#FAFAFB',\n      });\n      refs.buttonLoadMore.removeEventListener('click', onButtonLoadMoreClick);\n    }\n  }\n}\n"],"names":["refs","markupGallery","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","serchPictureGallery","query","page","per_page","apiInstance","data","hiddenClass","hide","button","show","enable","disable","buttonLoadMore","pageSizeParams","onFormSubmit","event","form","onButtonLoadMoreClick","iziToast","hits","totalHits","SimpleLightbox","error","markup","rect"],"mappings":"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"}